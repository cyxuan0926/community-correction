(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18d21b46"],{"13cc":function(e,t,a){},"5e96":function(e,t,a){"use strict";var r=a("13cc"),i=a.n(r);i.a},b606:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"correction-staff"},[a("div",{staticClass:"correction-staff_search search"},[a("base-filter",{attrs:{filterItems:e.filterItems,"on-filter":e.onFilterForms,clearable:""},model:{value:e.filterParams,callback:function(t){e.filterParams=t},expression:"filterParams"}})],1),a("div",{staticClass:"correction-staff_content content"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[e._l(e.tabOptions,(function(e){var t=e.name,r=e.label;return[a("el-tab-pane",{key:r+t,attrs:{label:r,name:t}})]}))],2),a("base-table",{staticClass:"table-tabs_card",attrs:{cols:e.tableCols,data:e.correctionalPage.content,stripe:""},scopedSlots:e._u([{key:"operation",fn:function(t){var r=t.row;return[r.status===e.tabStatus["PENDING"]?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onVerify(r)}}},[e._v("审核")]):e._e(),r.status===e.tabStatus["PASSED"]?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onEdit(r)}}},[e._v(e._s(+r.edited?"查看":"编辑"))]):e._e()]}}])})],1),a("base-pagination",{attrs:{total:e.correctionalPage.totalCount,"page-size":e.pagination.rows,"current-page":e.pagination.page},on:{"update:pageSize":function(t){return e.$set(e.pagination,"rows",t)},"update:page-size":function(t){return e.$set(e.pagination,"rows",t)},"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.onSizeChange,"current-change":e.onPageChange}}),a("el-dialog",{attrs:{visible:e.show.dialogVisible,title:"审核","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.show,"dialogVisible",t)},close:e.onVerifyClose}},[a("div",{staticClass:"row"},[a("label",[e._v("矫正人员姓名:")]),a("span",[e._v(e._s(e.correctionStaff.realName))])]),a("div",{staticClass:"row row-verifier"},[a("label",[e._v("请核对申请人信息:")]),a("div",{staticClass:"row-verifier_files"},[e._l(e.correctionStaff.attachmentFileList,(function(e){return a("base-img-viewer",{key:e.fileUuid,attrs:{url:e.url,title:e.title}})}))],2)]),e._l(e.correctionStaff.addressList,(function(t,r){return a("div",{key:t.id,staticClass:"row"},[a("label",[e._v("报到地点:")]),a("span",{staticClass:"cursor_pointer",on:{click:function(t){return e.onMapShow(e.correctionStaff.addressList[r])}}},[e._v(" "+e._s(t.addressDetail)+" ")])])})),a("div",{staticClass:"row"},[a("label",[e._v("有效范围:")]),a("el-select",{attrs:{placeholder:"请选择有效范围"},model:{value:e.radius,callback:function(t){e.radius=t},expression:"radius"}},e._l(e.radiusOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e.show.verifyDisagreeVisible?a("div",{staticClass:"row row-remark"},[a("label",[e._v("请选择驳回原因:")]),a("div",[a("el-select",{attrs:{placeholder:"请选择驳回原因"},on:{change:e.onRemarkChange},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}},e._l(e.remarkOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),"其他"===e.remark?a("div",{staticClass:"remark-others"},[a("el-form",{ref:"form",attrs:{model:e.formModel,rules:e.rules}},[a("el-form-item",{attrs:{prop:"remarkReason"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请填写驳回原因",maxlength:"50","show-word-limit":""},model:{value:e.formModel.remarkReason,callback:function(t){e.$set(e.formModel,"remarkReason","string"===typeof t?t.trim():t)},expression:"formModel.remarkReason"}})],1)],1)],1):e._e()]):e._e(),e.show.verifyArgeeVisible||e.show.verifyDisagreeVisible?e._e():a("repetition-button",{staticClass:"row row-button row-flex",attrs:{buttonItems:e.verifyButtons}}),e.show.verifyArgeeVisible?a("repetition-button",{staticClass:"row row-button row-flex row-argee",attrs:{buttonItems:e.verifyArgeeButtons}}):e._e(),e.show.verifyDisagreeVisible?a("repetition-button",{staticClass:"row row-button row-flex",attrs:{buttonItems:e.verifyDisagreeButtons}}):e._e()],2),a("base-map-viewer",{attrs:{visible:e.show.mapVisible,radius:e.radius,"on-map-close":e.onMapClose,"map-configs":e.mapConfigs}})],1)},i=[],n=(a("b4fb"),a("77ad"),a("ea69"),a("053b"),a("6a61"),a("327b")),s=a("232a"),o=a("6c6d"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.buttonItems,(function(t,r){return a("el-button",e._g(e._b({key:"id-repetition-el-button-"+r,attrs:{"data-status":t.authStatus}},"el-button",t.attrs,!1),t.events),[e._v(" "+e._s(t.text)+" ")])})),1)},c=[],u={props:{buttonItems:{type:Array,default:function(){return[]}}}},f=u,d=a("9ca4"),b=Object(d["a"])(f,l,c,!1,null,null,null),p=b.exports,m=a("9165"),h=a("08e7"),g=a("c00d"),v=a("9f3a"),w={name:"correctionStaff",mixins:[m["c"]],components:{repetitionButton:p},data:function(){var e={PASSED:"PASSED",PENDING:"PENDING"},t=[{label:"矫正人员管理",name:e["PASSED"]},{label:"待审核",name:e["PENDING"]}],a=[{label:"矫正人员姓名",prop:"realName",showOverflowTooltip:!0},{label:"电话号码",prop:"phone",minWidth:"90px"},{label:"性别",prop:"sex",minWidth:"60px"},{label:"申请时间",prop:"createTime",minWidth:"130px"},{label:"户籍地址",prop:"address",minWidth:"180px",showOverflowTooltip:!0},{label:"居住地",prop:"livingPlace",minWidth:"180px",showOverflowTooltip:!0},{label:"接管日期",prop:"handoverTime"},{label:"操作",slotName:"operation",minWidth:"80px"}],r=[{name:"name",type:"input",placeholder:"请输入矫正人员姓名"},{name:"time",type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",defaultTime:["00:00:00","23:59:59"],valueFormat:"yyyy-MM-dd HH:mm:ss"}];return{activeTabName:e["PENDING"],tabOptions:t,tabStatus:e,allTableCols:a,filterItems:r,pengdingFilterItems:r,radius:300,radiusOptions:g["b"],remarkOptions:g["d"],remark:"身份信息错误",show:{dialogVisible:!1,verifyArgeeVisible:!1,verifyDisagreeVisible:!1,mapVisible:!1},map:null,formModel:{remarkReason:""},rules:{remarkReason:[{required:!0,message:"请填写驳回原因",trigger:"blur"}]},correctionStaff:{},mapConfigs:{},buttonLoading:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(v["d"])("correctionStaff",["correctionalPage","authResult"])),{},{tableCols:function(){var e=this.allTableCols.slice(0);return this.activeTabName===this.tabStatus["PENDING"]&&e.splice(-2,1),e},goBackButton:function(){return{text:"返回",attrs:{plain:!0,disabled:this.buttonLoading}}},closeButton:function(){return{text:"关闭",attrs:{plain:!0,type:"danger",disabled:this.buttonLoading},events:{click:this.onVerifyClose}}},verifyDisagreeButtons:function(){return[{text:"提交",attrs:{plain:!0,loading:this.buttonLoading},events:{click:this.OnAuthCorrectionStaff},authStatus:"DENIED"},Object(o["a"])(Object(o["a"])({},this.goBackButton),{},{events:{click:this.onVerifyDisargeeGoBack}}),this.closeButton]},verifyButtons:function(){return[{text:"通过",attrs:{plain:!0},events:{click:this.onVerifyArgee}},{text:"不通过",attrs:{plain:!0},events:{click:this.onVerifyDisargee}},this.closeButton]},verifyArgeeButtons:function(){return[{text:"确定审核通过？",attrs:{plain:!0,loading:this.buttonLoading},events:{click:this.OnAuthCorrectionStaff},authStatus:"PASSED"},Object(o["a"])(Object(o["a"])({},this.goBackButton),{},{events:{click:this.onVerifyArgeeGoBack}}),this.closeButton]}}),watch:{activeTabName:function(e){if(e!==this.tabStatus["PENDING"]){var t={name:"edited",type:"select",placeholder:"请选择填写状态",options:g["a"]};this.filterItems=[].concat(Object(s["a"])(this.pengdingFilterItems),[t])}else this.filterItems=this.pengdingFilterItems}},methods:Object(o["a"])(Object(o["a"])({},Object(v["b"])("correctionStaff",["getCorrectionalPage","authCorrectionalStaff"])),{},{gettingPageData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$showLoading(),a=e.filterParams,r=a.name,i=a.edited,n=a.time,s=Object(o["a"])(Object(o["a"])({},e.pagination),{},{status:e.activeTabName,name:r,edited:i}),n&&(s=Object(o["a"])(Object(o["a"])({},s),{},{startTime:n[0],endTime:n[1]})),t.next=6,e.getCorrectionalPage(s);case 6:e.$set(e.pageData,"totalElements",e.correctionalPage["totalCount"]);case 7:case"end":return t.stop()}}),t)})))()},onVerify:function(e){this.show.dialogVisible=!0,this.correctionStaff=Object.assign({},e),this.radius=this.correctionStaff.effectiveRange},onVerifyArgee:function(){this.show.verifyArgeeVisible=!0},onVerifyArgeeGoBack:function(){this.show.verifyArgeeVisible=!1},onVerifyDisargee:function(){this.show.verifyDisagreeVisible=!0},onVerifyDisargeeGoBack:function(){this.show.verifyDisagreeVisible=!1,this.remark="身份信息错误",this.$refs.form&&this.$refs.form.resetFields()},onVerifyClose:function(){this.show.dialogVisible=!1,this.show.verifyArgeeVisible=!1,this.show.verifyDisagreeVisible=!1,this.radius=300,this.remark="身份信息错误",this.$refs.form&&this.$refs.form.resetFields()},OnAuthCorrectionStaff:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$showLoading(),t.buttonLoading=!0,r=t.correctionStaff.username,i={effectiveRange:t.radius,opStatus:e.currentTarget.dataset.status,username:r},n=!1,"DENIED"!==e.currentTarget.dataset.status){a.next=23;break}if(s=t.formModel.remarkReason||t.remark,i=Object(o["a"])(Object(o["a"])({},i),{},{remarks:s}),"其他"!==t.remark){a.next=18;break}return a.next=11,t.$refs.form.validate();case 11:if(a.t0=a.sent,!a.t0){a.next=16;break}return a.next=15,t.authCorrectionalStaff(i);case 15:n=a.sent;case 16:a.next=21;break;case 18:return a.next=20,t.authCorrectionalStaff(i);case 20:n=a.sent;case 21:a.next=26;break;case 23:return a.next=25,t.authCorrectionalStaff(i);case 25:n=a.sent;case 26:t.buttonLoading=!1,n&&t.onVerifyClose(),t.authResult.isPassed&&(t.activeTabName="PASSED"),t.authResult.isDenied&&(t.calculatePagination(),t.gettingPageData());case 30:case"end":return a.stop()}}),a)})))()},onRemarkChange:function(){this.$refs.form&&this.$refs.form.resetFields()},onMapClose:function(){this.show.mapVisible=!1},onMapShow:function(e){var t=e.lng,a=e.lat;this.mapConfigs={mapClass:{center:[t,a]},circleConfigs:{center:[t,a]},markerConfigs:{position:[t,a]}},this.show.mapVisible=!0},onEdit:function(e){var t=e.username;this.$router.push({path:"".concat(h["a"].CORRECTION_STAFF_INFORMATION,"/").concat(t)})}}),activated:function(){this.gettingPageData()}},k=w,y=(a("5e96"),Object(d["a"])(k,r,i,!1,null,"d6d95994",null));t["default"]=y.exports},ea69:function(e,t,a){"use strict";var r=a("1c8b"),i=a("e1d6"),n=a("3da3"),s=a("d88d"),o=a("3553"),l=a("1ca1"),c=a("1bbd"),u=a("1ea7"),f=a("ff9c"),d=u("splice"),b=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,m=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!b},{splice:function(e,t){var a,r,u,f,d,b,v=o(this),w=s(v.length),k=i(e,w),y=arguments.length;if(0===y?a=r=0:1===y?(a=0,r=w-k):(a=y-2,r=m(p(n(t),0),w-k)),w+a-r>h)throw TypeError(g);for(u=l(v,r),f=0;f<r;f++)d=k+f,d in v&&c(u,f,v[d]);if(u.length=r,a<r){for(f=k;f<w-r;f++)d=f+r,b=f+a,d in v?v[b]=v[d]:delete v[b];for(f=w;f>w-r+a;f--)delete v[f-1]}else if(a>r)for(f=w-r;f>k;f--)d=f+r-1,b=f+a-1,d in v?v[b]=v[d]:delete v[b];for(f=0;f<a;f++)v[f+k]=arguments[f+2];return v.length=w-r+a,u}})}}]);